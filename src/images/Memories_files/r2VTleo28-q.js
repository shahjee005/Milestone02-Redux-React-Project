if (self.CavalryLogger) { CavalryLogger.start_js(["Pu1Hh"]); }

__d("MessageTextWithFormattingRootQuery.graphql",["RelayHooks"],(function(a,b,c,d,e,f){"use strict";a=b("RelayHooks").PreloadableQueryRegistry;c=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"story_id",type:"ID!"},{defaultValue:null,kind:"LocalArgument",name:"scale",type:"Float"}],b=[{kind:"Variable",name:"id",variableName:"story_id"}],c={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},h={alias:null,args:null,concreteType:"DelightAtRange",kind:"LinkedField",name:"delight_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:"TextDelightCampaign",kind:"LinkedField",name:"campaign",plural:!1,selections:[f,{alias:null,args:[{kind:"Literal",name:"delight_surface",value:"POST"}],concreteType:"TextDelightStylePair",kind:"LinkedField",name:"delight_styles",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:'delight_styles(delight_surface:"POST")'}],storageKey:null},e,d],storageKey:null},i=[{kind:"Variable",name:"scale",variableName:"scale"}],j=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}];i={alias:null,args:null,concreteType:"TextFormatMetadata",kind:"LinkedField",name:"text_format_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"background_color",storageKey:null},{alias:null,args:i,concreteType:"Image",kind:"LinkedField",name:"background_image",plural:!1,selections:j,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"background_gradient_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"background_gradient_direction",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"StoryTextFontObject",kind:"LinkedField",name:"font_object",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"default_font_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"font_name",storageKey:null},g],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"font_style",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"font_weight",storageKey:null},{alias:null,args:i,concreteType:"Image",kind:"LinkedField",name:"portrait_background_image",plural:!1,selections:j,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text_align",storageKey:null}],storageKey:null};j={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessageTextWithFormattingRootQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:[c,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[d,e,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[f,g],storageKey:null}],storageKey:null},h],storageKey:null},i,g],type:"Story"}],storageKey:null}],type:"Query"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessageTextWithFormattingRootQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[j,f,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:[c,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[d,e,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[j,f,g],storageKey:null}],storageKey:null},h],storageKey:null},i,g],type:"Story"}],storageKey:null}]},params:{id:"2309712262434228",metadata:{relayPreloadable:!0},name:"MessageTextWithFormattingRootQuery",operationKind:"query",text:null}}}();c.params.id!=null&&a.set(c.params.id,c);e.exports=c}),null);
__d("WebPixelRatio",["SiteData"],(function(a,b,c,d,e,f){a={get:function(){return b("SiteData").pr!=null&&b("SiteData").pr>0?b("SiteData").pr:window.devicePixelRatio||1}};e.exports=a}),null);
__d("ProfileLink.react",["Link.react","React","URI"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=new(g||(g=b("URI")))("/ajax/hovercard/user.php").setQueryData({id:this.props.uid});return h.jsx(b("Link.react"),babelHelpers["extends"]({},this.props,{"data-hovercard":a,href:(a=this.props.href)!=null?a:"/"+this.props.uid,tabIndex:(a=this.props.tabIndex)!=null?a:"0",children:this.props.children}))};return c}(h.Component);e.exports=a}),null);
__d("messageTextWithFormattingInterpolator",["ProfileLink.react","React","TextDelightRange.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");e.exports=function(a,c){if(c.entity&&typeof c.entity.url==="string")return g.jsx(b("ProfileLink.react"),{uid:c.entity.id,href:c.entity.url,children:a});else if(c.campaign)return g.jsx(b("TextDelightRange.react"),{campaignID:c.campaign.id,delightStyles:c.campaign.delight_styles,surface:"comment",children:a});return a}}),null);
__d("cssURL",[],(function(a,b,c,d,e,f){function a(a){return"url('"+a.replace(/[\ud800-\udfff].|[^-a-zA-Z0-9./_?]/g,function(a){return"\\"+a.codePointAt(0).toString(16)+" "})+"')"}e.exports=a}),null);
__d("CssBackgroundImage.react",["EncryptedImg","React","createCancelableFunction","cssURL"],(function(a,b,c,d,e,f){var g=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={image:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs="},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.$2=function(a){var c=this;this.$1&&this.$1.cancel();this.$1=b("createCancelableFunction")(function(b){a===c.props.imageURI&&c.setState({image:b})});b("EncryptedImg").load(a,this.$1)};c.getDerivedStateFromProps=function(a){a=a.imageURI;return a!=null&&!b("EncryptedImg").isEncrypted(a)?{image:a}:null};d.componentDidMount=function(){var a=this.props.imageURI;a!=null&&b("EncryptedImg").isEncrypted(a)&&this.$2(a)};d.componentDidUpdate=function(a){var c=this.props.imageURI;c!==a.imageURI&&c!=null&&b("EncryptedImg").isEncrypted(c)&&this.$2(c)};d.componentWillUnmount=function(){this.$1&&this.$1.cancel()};d.render=function(){var a=this.props;a.imageURI;var c=a.backgroundPosition,d=a.height,e=a.width,f=a.style;a=babelHelpers.objectWithoutPropertiesLoose(a,["imageURI","backgroundPosition","height","width","style"]);return g.jsx("div",babelHelpers["extends"]({style:babelHelpers["extends"]({},f,{backgroundImage:b("cssURL")(this.state.image),backgroundPosition:c||f.backgroundPosition,height:d||f.height,width:e||f.width})},a))};return c}(g.Component);a.defaultProps={backgroundPosition:"0% 0%",style:{}};e.exports=a}),null);
__d("getSquiggleImgURL",[],(function(a,b,c,d,e,f){"use strict";function g(a){return'<svg fill="'+a+'" opacity="0.8" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 10 2.8"><path d="M10,0.7L9.7,1C8.4,2,6.6,2,5.3,1C3.8-0.3,1.6-0.3,0,0.8V2l0.3-0.2c1.3-1,3.1-1,4.4,0c0.8,0.7,1.8,1,2.8,1C8.4,2.8,9.2,2.5,10,2V0.7z"/></svg>'}function h(a){return'<svg fill="'+a+'" opacity="0.8" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 10 3.8"><path d="M10,0.6L9.4,1.1C8.3,2,6.7,2,5.6,1.1C4-0.2,1.8-0.3,0,0.7v2.5l0.6-0.5c1.1-0.9,2.6-0.9,3.8,0c0.9,0.7,2,1.1,3.1,1.1c0.9,0,1.7-0.2,2.5-0.7V0.6z"/></svg>'}function a(a,b){return"'data:image/svg+xml;utf8,"+(b?h(a):g(a))+"'"}e.exports=a}),null);
__d("MessageTextWithFormattingUtils",["invariant"],(function(a,b,c,d,e,f,g){"use strict";var h=1.44,i=30,j=50,k=30,l=700,m=[{characterThreshold:360,size:16,styles:{fontSize:"16px",fontWeight:"500",lineHeight:"1.5em"}},{characterThreshold:180,size:24,styles:{fontSize:"24px"}}],n={},o=null;function p(a,b){if(n[a])return;o||(o=document.createElement("style"),o.type="text/css",document.head&&document.head.appendChild(o));o.appendChild(document.createTextNode("\n    @font-face {\n      font-family: '"+a+"';\n      src: url("+b+");\n    }\n  "));n[a]=b}function a(a){return typeof a==="number"&&a>0?{minHeight:Math.round(a/h)+"px"}:{}}function q(a){a===void 0&&(a=0);return m.find(function(b){return a>=b.characterThreshold})}function r(a){var b=a.font_object,c=b&&b.default_font_size||k;b&&p(b.font_name,b.url);return{color:u(a.color),fontFamily:b&&b.font_name,fontSize:c+"px",fontStyle:(a.font_style||"").toLowerCase(),fontWeight:a.font_weight==="BOLD"?l.toString():"normal",lineHeight:"1.2em",padding:a.background_image||a.portrait_background_image||typeof a.background_color==="string"?j+"px "+i+"px":null,textAlign:(a.text_align||"").toLowerCase()}}function b(a,b){b===void 0&&(b=0);return babelHelpers["extends"]({},r(a),(q(b)||{}).styles)}function c(a,b){a=a.font_object&&typeof a.font_object.default_font_size==="number"?a.font_object.default_font_size:k;b=q(b);return b?b.size:a}function d(a){return{backgroundColor:u(a.background_color)}}function f(a){var b=u(a.background_gradient_color),c=u(a.background_color);a=a.background_gradient_direction;if(!(typeof b==="string"&&typeof c==="string"&&typeof a==="string"))return null;var d="";switch(a){case"BL_TR":case"TR_BL":d="45deg";break;case"LEFT_RIGHT":case"RIGHT_LEFT":d="to right";break;case"TL_BR":case"BR_TL":d="135deg";break;case"TOP_BOTTOM":case"BOTTOM_TOP":d="to bottom";break}var e=c,f=b;(a==="BOTTOM_TOP"||a==="BR_TL"||a==="TR_BL"||a==="RIGHT_LEFT")&&(e=b,f=c);return{backgroundImage:"linear-gradient("+d+","+e+" 0%,"+f+" 100%)"}}function s(a){a=u(a.background_color);return typeof a!=="string"?null:{backgroundImage:"linear-gradient(rgba(255,255,255,0),"+a+")"}}function t(a){if(!(typeof a==="string"))return null;/^[0-9a-fA-F]{8}$/.test(a)||g(0,2331,a);return{r:parseInt(a.slice(2,4),16),g:parseInt(a.slice(4,6),16),b:parseInt(a.slice(6,8),16),a:parseInt(a.slice(0,2),16)/255}}function u(a){a=t(a);return!a?null:"rgba("+a.r+","+a.g+","+a.b+","+a.a+")"}function v(a){a=t(a.color);return!a?!1:(a.r+a.g+a.b)/(255*3)>=.5}e.exports={getRootStyle:a,getMessageStyle:b,getBackgroundStyle:d,getBackgroundGradientStyle:f,getBackgroundImageExtendedGradientStyle:s,getTextSize:c,formatHexColorToRGBA:t,formatHexColorToRGBAString:u,hasLightTextColor:v,registerFont:p}}),null);
__d("MessageTextWithFormatting.react",["cx","fbt","BaseTextWithEntities.react","CssBackgroundImage.react","Image.react","Link.react","Locale","MessageTextWithFormattingUtils","React","TextWithEmoticons.react","UnicodeBidi","UnicodeBidiDirection","findSplitPointForText","getSquiggleImgURL","gkx","messageTextWithFormattingInterpolator","partitionTextAndRanges"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=1.44,k=.5625,l=.7,m=3e3,n=360,o=5,p=250,q=5,r=h._("See More"),s=h._("See Less");a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$1=null;d.$6=!1;d.$7=!1;d.state={width:null,height:null,expanded:!1};d.recalculateDimensions=function(){d.$1&&d.setState({width:d.$1.offsetWidth,height:d.$1.offsetHeight})};d.onSeeMoreToggle=function(){d.setState(function(a){return{expanded:!a.expanded}},d.recalculateDimensions)};d.renderMessageText=function(a){var c=a.trim();return i.jsx(b("TextWithEmoticons.react"),{isWhitespace:c.length===0,text:a,size:d.$2})};d.setMessageText(c.message);return d}var d=c.prototype;d.setMessageText=function(a){var c=this.props,d=c.isMobile,e=c.textFormatMetadata;c=c.shouldPreventTextTruncation;var f=a.text;this.$5=b("gkx")("684187");var g=[];if(this.$5){var h=b("MessageTextWithFormattingUtils").getMessageStyle(e,a.text.length);g=[{style:"background-image",value:"url("+b("getSquiggleImgURL")(h.color||"",!0)+")"}]}h=[].concat(a.ranges,(a.delight_ranges||[]).map(function(a){return babelHelpers["extends"]({},a,{campaign:babelHelpers["extends"]({},a.campaign,{delight_styles:[].concat(a.campaign.delight_styles.filter(function(a){return a.style!=="color"}),g)})})}));this.$2=b("MessageTextWithFormattingUtils").getTextSize(e,f.length);this.$6=this.props.message.text.length>=m;this.$7=c&&this.$6;a=b("findSplitPointForText")(f,d?p:n,d?q:o);if(!this.$7&&typeof a==="number"){while(f[a-1]==="\n")a--;e=b("partitionTextAndRanges")(f,h,[],a);this.$4=i.jsx(b("BaseTextWithEntities.react"),{textRenderer:this.renderMessageText,rangeRenderer:b("messageTextWithFormattingInterpolator"),ranges:e.after.ranges,text:e.after.text});f=e.before.text;h=e.before.ranges}this.$3=i.jsx(b("BaseTextWithEntities.react"),{textRenderer:this.renderMessageText,rangeRenderer:b("messageTextWithFormattingInterpolator"),ranges:h,text:f})};d.componentDidMount=function(){this.recalculateDimensions()};d.render=function(){var a=this,c=this.props,d=c.message,e=c.textFormatMetadata;c=c.isMobile;var f=b("MessageTextWithFormattingUtils").getMessageStyle(e,d.text.length);(this.$4||this.$7)&&(f.textAlign=b("UnicodeBidi").getDirection(d.text)===b("UnicodeBidiDirection").RTL?"right":"left");return i.jsxs("div",{ref:function(b){return a.$1=b},className:"_6rsm"+(b("MessageTextWithFormattingUtils").hasLightTextColor(e)?" _797s":""),style:b("MessageTextWithFormattingUtils").getRootStyle(this.state.width),children:[i.jsxs("div",{className:"_6rsn",style:b("MessageTextWithFormattingUtils").getBackgroundStyle(e),children:[this.renderBackgroundImage(),this.renderBackgroundGradient()]}),i.jsxs("div",{className:"_6rsw"+(this.$5?" _6xrs":""),style:f,children:[i.jsx("span",{className:"_7df8",children:i.jsxs("span",{children:[this.$3,this.renderSeeMoreDots(),this.renderSeeMoreText()]})}),!this.state.expanded&&!c&&this.$6?this.renderSeeMorePermalink():this.renderSeeMoreOrLessLink()]})]})};d.renderSeeMorePermalink=function(){if(!this.$4)return null;var a=b("Locale").isRTL();return i.jsx(b("Link.react"),{className:"_6tw8"+(a?" _6twi":"")+(b("MessageTextWithFormattingUtils").hasLightTextColor(this.props.textFormatMetadata)?" _6twj":"")+(this.state.expanded?" _6-nz":""),href:this.props.url,style:{direction:a?"rtl":"ltr",textAlign:a?"right":"left"},children:r})};d.renderSeeMoreDots=function(){return this.state.expanded||!this.$4?null:i.jsx("span",{children:h._("\u2026")})};d.renderSeeMoreText=function(){return!this.state.expanded||!this.$4?null:this.$4};d.renderSeeMoreOrLessLink=function(){if(!this.$4)return null;var a=b("Locale").isRTL();return i.jsx("a",{className:"_6tw8"+(a?" _6twi":"")+(this.state.expanded?" _6-nz":""),onClick:this.onSeeMoreToggle,href:"#",role:"button",style:{direction:a?"rtl":"ltr",textAlign:a?"right":"left"},children:this.state.expanded?s:r})};d.renderBackgroundImage=function(){var a=this.props.textFormatMetadata,c=this.state,d=c.width;c=c.height;d=typeof d==="number"&&typeof c==="number"?d/c:j;c=a.background_image&&a.background_image.uri;var e=a.portrait_background_image&&a.portrait_background_image.uri,f=null,g=!1;c&&e?(f=d<j*l?e:c,g=d<k*l):c?(f=c,g=d<j*l):e&&(f=e,g=d<k*l);if(f===null)return null;return g?i.jsxs("div",{className:"_6rsp",children:[i.jsx(b("Image.react"),{src:f,className:"_6rsq"}),i.jsx(b("Image.react"),{src:f,className:"_6rst"}),i.jsx("div",{className:"_6rsu",style:b("MessageTextWithFormattingUtils").getBackgroundImageExtendedGradientStyle(a)})]}):i.jsx(b("CssBackgroundImage.react"),{className:"_6rsp",imageURI:f,backgroundPosition:"center",height:"100%",width:"100%",style:{backgroundSize:"cover"}})};d.renderBackgroundGradient=function(){var a=this.props.textFormatMetadata;return typeof a.background_gradient_color!=="string"?null:i.jsx("div",{className:"_6rsv",style:b("MessageTextWithFormattingUtils").getBackgroundGradientStyle(a)})};d.renderMessageRange=function(a,c){return c.entity&&typeof c.entity.url==="string"?i.jsx(b("Link.react"),{href:c.entity.url,children:a}):a};return c}(i.Component);a.defaultProps={shouldPreventTextTruncation:!1};e.exports=a}),null);
__d("MessageTextWithFormattingRoot.react",["MessageTextWithFormatting.react","React","RelayFBEnvironment","RelayModern","WebPixelRatio","MessageTextWithFormattingRootQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=b("RelayModern").QueryRenderer;b("RelayModern").graphql;function a(a){return h.jsx(i,{environment:b("RelayFBEnvironment"),query:j,cacheConfig:{force:!0},variables:{story_id:a.storyID,scale:b("WebPixelRatio").get()},render:function(c){c.error;c=c.props;return c&&c.node?h.jsx(b("MessageTextWithFormatting.react"),{message:c.node.message,textFormatMetadata:c.node.text_format_metadata,url:c.node.url,location:a.location,isMobile:a.isMobile,shouldPreventTextTruncation:a.shouldPreventTextTruncation}):h.jsx("div",{})}})}var j=g!==void 0?g:g=b("MessageTextWithFormattingRootQuery.graphql");e.exports=a}),null);